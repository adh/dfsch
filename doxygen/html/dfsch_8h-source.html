<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>dfsch: dfsch.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.8 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>dfsch.h</h1><a href="dfsch_8h.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/*</span>
00002 <span class="comment"> * dfsch - DFox's quick and dirty scheme implementation</span>
00003 <span class="comment"> * Copyright (C) 2005 Ales Hakl</span>
00004 <span class="comment"> *</span>
00005 <span class="comment"> * This program is free software; you can redistribute it and/or modify</span>
00006 <span class="comment"> * it under the terms of the GNU General Public License as published by</span>
00007 <span class="comment"> * the Free Software Foundation; either version 2 of the License, or</span>
00008 <span class="comment"> * (at your option) any later version.</span>
00009 <span class="comment"> *</span>
00010 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
00011 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00012 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00013 <span class="comment"> * GNU General Public License for more details.</span>
00014 <span class="comment"> *</span>
00015 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
00016 <span class="comment"> * along with this program; if not, write to the Free Software</span>
00017 <span class="comment"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
00018 <span class="comment"> *</span>
00019 <span class="comment"> */</span>
00020 
00021 <span class="comment">/*</span>
00022 <span class="comment"> * It's not really scheme but something slightly similar, features left out </span>
00023 <span class="comment"> * include:</span>
00024 <span class="comment"> * - Tail recursion</span>
00025 <span class="comment"> * - Continuations</span>
00026 <span class="comment"> * - I/O (left out on purpose)</span>
00027 <span class="comment"> * - and maybe something other </span>
00028 <span class="comment"> */</span>
00029 
00038 <span class="preprocessor">#ifndef H__dfsch__</span>
00039 <span class="preprocessor"></span><span class="preprocessor">#define H__dfsch__</span>
00040 <span class="preprocessor"></span>
00041 
<a name="l00045"></a><a class="code" href="dfsch_8h.html#a2">00045</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="dfsch_8h.html#a2">dfsch_ctx_t</a> <a class="code" href="dfsch_8h.html#a2">dfsch_ctx_t</a>;
00046 
<a name="l00050"></a><a class="code" href="dfsch_8h.html#a3">00050</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a> <a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a>;
00051 
<a name="l00055"></a><a class="code" href="dfsch_8h.html#a4">00055</a> <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="dfsch_8h.html#a4">dfsch_cXr_t</a>;
00056 
<a name="l00060"></a><a class="code" href="dfsch_8h.html#a5">00060</a> <span class="keyword">typedef</span> <a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a>* (*dfsch_primitive_t)(<a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a>*);
00061 
00062 <span class="preprocessor">#define DFSCH_CAR 0</span>
00063 <span class="preprocessor"></span><span class="preprocessor">#define DFSCH_CDR 0</span>
00064 <span class="preprocessor"></span>
00065 
00066 <span class="comment">// object handling</span>
00067 
00071 <span class="keyword">extern</span> <span class="keywordtype">int</span> dfsch_gc();
00072 
00076 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dfsch_8h.html#a7">dfsch_object_ref</a>(dfsch_object_t* obj);
00080 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dfsch_8h.html#a8">dfsch_object_unref</a>(dfsch_object_t* obj);
00081 
00085 <span class="keyword">extern</span> <span class="keywordtype">int</span> dfsch_eq_p(dfsch_object_t *a, dfsch_object_t *b);
00086 
00090 <span class="keyword">extern</span> <span class="keywordtype">int</span> dfsch_object_null_p(dfsch_object_t* obj);
00091 
00095 <span class="keyword">extern</span> <span class="keywordtype">int</span> dfsch_object_pair_p(dfsch_object_t* obj);
00096 
00100 <span class="keyword">extern</span> <span class="keywordtype">int</span> dfsch_object_atom_p(dfsch_object_t* obj); <span class="comment">// i.e. not pair</span>
00101 
00105 <span class="keyword">extern</span> <span class="keywordtype">int</span> dfsch_object_symbol_p(dfsch_object_t* obj);
00106 
00110 <span class="keyword">extern</span> <span class="keywordtype">int</span> dfsch_object_number_p(dfsch_object_t* obj);
00111 
00115 <span class="keyword">extern</span> <span class="keywordtype">int</span> dfsch_object_string_p(dfsch_object_t* obj);
00116 
00120 <span class="keyword">extern</span> <span class="keywordtype">int</span> dfsch_object_primitive_p(dfsch_object_t* obj);
00121 
00125 <span class="keyword">extern</span> <span class="keywordtype">int</span> dfsch_object_closure_p(dfsch_object_t* obj);
00126 
00130 <span class="keyword">extern</span> <span class="keywordtype">int</span> dfsch_object_procedure_p(dfsch_object_t* obj);
00131 
00135 <span class="keyword">extern</span> <span class="keywordtype">int</span> dfsch_object_macro_p(dfsch_object_t* obj);
00136 
00140 <span class="keyword">extern</span> <span class="keywordtype">int</span> dfsch_object_exception_p(dfsch_object_t* obj);
00141 
00142 
00146 <span class="keyword">extern</span> <a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a>* dfsch_obj_read(<span class="keywordtype">char</span>* str);
00147 
00151 <span class="keyword">extern</span> <span class="keywordtype">char</span>* dfsch_obj_write(dfsch_object_t* obj, <span class="keywordtype">int</span> max_depth);
00152 
00153 <span class="comment">// NIL</span>
00154 
00158 <span class="keyword">extern</span> <a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a>* <a class="code" href="dfsch_8h.html#a23">dfsch_nil</a>();
00159 
00160 <span class="comment">// pairs</span>
00161 
00165 <span class="keyword">extern</span> <a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a>* dfsch_cons(dfsch_object_t* car, dfsch_object_t* cdr);
00166 
00170 <span class="keyword">extern</span> <a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a>* dfsch_car(dfsch_object_t* pair);
00171 
00175 <span class="keyword">extern</span> <a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a>* dfsch_cdr(dfsch_object_t* pair);
00176 
00180 <span class="keyword">extern</span> <a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a>* <a class="code" href="dfsch_8h.html#a27">dfsch_cXr</a>(dfsch_object_t* pair, dfsch_cXr_t x);
00181 
00185 <span class="keyword">extern</span> <a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a>* dfsch_set_car(dfsch_object_t* pair,
00186                                      dfsch_object_t* c);
00187 
00191 <span class="keyword">extern</span> <a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a>* dfsch_set_cdr(dfsch_object_t* pair,
00192                                      dfsch_object_t* c);
00193 
00194 <span class="comment">// alists</span>
00198 <span class="comment"></span><span class="keyword">extern</span> <a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a>* dfsch_assoc(dfsch_object_t *key,
00199                                    dfsch_object_t *alist);
00200 
00201 <span class="comment">// symbols</span>
00202 
00206 <span class="keyword">extern</span> <a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a>* dfsch_make_symbol(<span class="keywordtype">char</span>* symbol);
00207 
00211 <span class="keyword">extern</span> <span class="keywordtype">char</span>* dfsch_symbol(dfsch_object_t* symbol);
00212 
00217 <span class="keyword">extern</span> <a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a>* dfsch_true();
00218 
00223 <span class="keyword">extern</span> <a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a>* dfsch_quote();
00224 
00225 <span class="comment">// numbers</span>
00226 
00230 <span class="keyword">extern</span> <a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a>* dfsch_make_number(<span class="keywordtype">double</span> n);
00234 <span class="keyword">extern</span> <span class="keywordtype">float</span> dfsch_number(dfsch_object_t *n);
00235 
00236 <span class="comment">// closures</span>
00237 
00238 
00239 <span class="keyword">extern</span> <a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a>* dfsch_lambda(dfsch_object_t* env,
00240                                     dfsch_object_t* args,
00241                                     dfsch_object_t* code);
00242 
00243 
00244 <span class="comment">// native code</span>
00245 
00250 <span class="keyword">extern</span> <a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a>* dfsch_make_primitive(<a class="code" href="dfsch_8h.html#a5">dfsch_primitive_t</a> prim);
00251 
00252 <span class="comment">// macros</span>
00253 
00257 <span class="keyword">extern</span> <a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a>* <a class="code" href="dfsch_8h.html#a39">dfsch_make_macro</a>(dfsch_object_t *proc);
00258 
00259 
00260 <span class="comment">// error handling</span>
00261 
00265 <span class="keyword">extern</span> <a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a>* dfsch_make_exception(dfsch_object_t* type, 
00266                                             dfsch_object_t* data);
00267 
00268 <span class="comment">// Lexical binding:</span>
00272 <span class="comment"></span><span class="keyword">extern</span> <a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a>* <a class="code" href="dfsch_8h.html#a41">dfsch_lookup</a>(dfsch_object_t* name, 
00273                                     dfsch_object_t* env);
00274 
00278 <span class="keyword">extern</span> <a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a>* <a class="code" href="dfsch_8h.html#a42">dfsch_set</a>(dfsch_object_t* name,
00279                                  dfsch_object_t* value,
00280                                  dfsch_object_t* env);
00281 
00285 <span class="keyword">extern</span> <a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a>* <a class="code" href="dfsch_8h.html#a43">dfsch_define</a>(dfsch_object_t* name,
00286                                     dfsch_object_t* value,
00287                                     dfsch_object_t* env);
00288 
00289 
00290 <span class="comment">// EVAL+APPLY</span>
00291 
00295 <span class="keyword">extern</span> <a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a>* dfsch_eval(dfsch_object_t* exp, dfsch_object_t* env);
00300 <span class="keyword">extern</span> <a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a>* dfsch_apply(dfsch_object_t* proc, dfsch_object_t* args);
00301 
00302 <span class="comment">// context</span>
00303 
00308 <span class="keyword">extern</span> <a class="code" href="dfsch_8h.html#a2">dfsch_ctx_t</a>* dfsch_make_context();
00312 <span class="keyword">extern</span> <a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a>* dfsch_ctx_eval(dfsch_ctx_t* ctx, dfsch_object_t* exp);
00318 <span class="keyword">extern</span> <span class="keywordtype">void</span> dfsch_destroy_context(dfsch_ctx_t* ctx);
00323 <span class="keyword">extern</span> <span class="keywordtype">void</span> dfsch_ctx_define(dfsch_ctx_t *ctx, 
00324                              <span class="keywordtype">char</span> *name, 
00325                              dfsch_object_t *obj);
00326 
00327 <span class="keyword">extern</span> <a class="code" href="dfsch_8h.html#a3">dfsch_object_t</a>* dfsch_ctx_environment(dfsch_ctx_t *ctx);
00328 
00329 <span class="preprocessor">#endif</span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Thu Feb 24 18:27:18 2005 for dfsch by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.8 </small></address>
</body>
</html>
